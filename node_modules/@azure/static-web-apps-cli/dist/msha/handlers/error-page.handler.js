"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handleErrorPage = void 0;
const core_1 = require("../../core");
const constants_1 = require("../../core/constants");
const routes_engine_1 = require("../routes-engine");
const route_processor_1 = require("../routes-engine/route-processor");
function handleErrorPage(req, res, statusCode, responseOverridesRule) {
    res.setHeader("ContentType", "text/html");
    // status code must be set before checking for overrides!
    res.statusCode = statusCode;
    if (responseOverridesRule) {
        (0, routes_engine_1.responseOverrides)(req, res, responseOverridesRule);
    }
    if (!(0, route_processor_1.isCustomUrl)(req)) {
        req.url = `/${statusCode}.html`;
    }
    (0, core_1.logRequest)(req, constants_1.SWA_CLI_APP_PROTOCOL + "://" + req.headers.host, statusCode);
}
exports.handleErrorPage = handleErrorPage;
//# sourceMappingURL=error-page.handler.js.map